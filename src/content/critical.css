/**
 * Fockey Critical CSS - FOUC Prevention
 *
 * This stylesheet is injected at document_start (earliest possible time)
 * to prevent Flash of Unstyled Content (FOUC) on all YouTube pages.
 *
 * Strategy: Hide ALL elements that are hidden by default in minimalist mode.
 * The main content script will then selectively reveal elements based on
 * user settings.
 *
 * IMPORTANT: This file contains ONLY the default-hidden elements.
 * Do NOT include conditionally hidden elements here.
 */

/* ============================================
   GLOBAL NAVIGATION (Hidden by default on all pages)
   ============================================ */

/* YouTube Logo */
ytd-topbar-logo-renderer,
#logo,
#logo-icon {
  display: none !important;
}

/* Hamburger Menu */
#guide-button,
ytd-guide-button-renderer,
button#guide-button {
  display: none !important;
}

/* Left Sidebar */
#guide,
ytd-guide-renderer,
#guide-wrapper,
ytd-mini-guide-renderer,
#mini-guide {
  display: none !important;
}

/* Profile Avatar */
#avatar-btn,
ytd-topbar-menu-button-renderer button#avatar-btn,
ytd-button-renderer#avatar-btn {
  display: none !important;
}

/* Notifications Bell */
ytd-notification-topbar-button-renderer,
#notification-button {
  display: none !important;
}

/* Masthead Skeleton Icons (loading placeholders in top-right) */
.masthead-skeleton-icon,
#masthead-skeleton-icons .masthead-skeleton-icon {
  display: none !important;
  visibility: hidden !important;
}

/* Watch Page Skeleton Elements (video metadata loading placeholders) */
#info-skeleton,
.watch-skeleton,
ytd-watch-flexy #info-skeleton,
ytd-watch-flexy .watch-skeleton {
  display: none !important;
  visibility: hidden !important;
}

/* Skeleton background color elements (loading placeholders below video) */
.skeleton-bg-color,
.skeleton-light-border-bottom,
ytd-watch-flexy .skeleton-bg-color,
ytd-watch-flexy .skeleton-light-border-bottom {
  display: none !important;
  visibility: hidden !important;
}

/* Upload/Create Button - Language-agnostic icon-based selector */
ytd-topbar-menu-button-renderer:has(yt-icon[icon='video_call']),
ytd-topbar-menu-button-renderer:has(
  button > yt-icon > svg > path[d*='M17 10.5V7c0-.55-.45-1-1-1H4c-.55']
),
#upload-button {
  display: none !important;
}

/* Skip Navigation (always hidden) */
#skip-navigation,
a.skip-nav {
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
  position: absolute !important;
  left: -9999px !important;
}

/* Topbar Buttons (settings, sign in, etc.) */
#buttons ytd-button-renderer:not(#avatar-btn):not(#notification-button) {
  display: none !important;
}

/* Additional topbar menu buttons */
ytd-topbar-menu-button-renderer:not(:has(#avatar-btn)):not(:has(#notification-button)) {
  display: none !important;
}

/* ============================================
   HOME PAGE (Minimalist Mode - Hide Feed)
   ============================================ */

/* Feed Container */
ytd-browse[page-subtype='home'] ytd-rich-grid-renderer,
ytd-browse[page-subtype='home'] ytd-two-column-browse-results-renderer,
ytd-browse[page-subtype='subscriptions'] ytd-two-column-browse-results-renderer,
ytd-browse[page-subtype='trending'] ytd-two-column-browse-results-renderer {
  display: none !important;
}

/* Shorts Shelf */
ytd-rich-shelf-renderer[is-shorts],
ytd-reel-shelf-renderer {
  display: none !important;
}

/* Home page filter chips bar */
ytd-browse[page-subtype='home'] ytd-feed-filter-chip-bar-renderer,
ytd-browse[page-subtype='home'] #chips-wrapper,
ytd-browse[page-subtype='subscriptions'] ytd-feed-filter-chip-bar-renderer {
  display: none !important;
}

/* ============================================
   SEARCH PAGE (Default Hidden Elements)
   ============================================ */

/* Shorts in search results - comprehensive selectors to match all YouTube Shorts formats */
ytd-search ytd-reel-shelf-renderer,
ytd-search ytd-short-shelf-renderer,
ytd-search ytd-shelf-renderer[is-shorts],
ytd-search ytd-short-renderer,
ytd-search ytd-rich-shelf-renderer[is-shorts],
ytd-search ytd-grid-video-renderer[is-shorts],
ytd-search ytd-rich-item-renderer[is-shorts],
ytd-search ytd-reel-item-renderer,
ytd-search grid-shelf-view-model,
ytd-search ytm-shorts-lockup-view-model-v2,
ytd-search ytm-shorts-lockup-view-model,
ytd-search ytd-video-renderer:has(a[href*='/shorts/']) {
  display: none !important;
}

/* Community Posts in search results */
ytd-search ytd-post-renderer,
ytd-search ytd-backstage-post-renderer {
  display: none !important;
}

/* Filter chips (All, Shorts, Videos, etc.) */
ytd-search ytd-search-sub-menu-renderer #chips-wrapper,
ytd-search ytd-chip-cloud-renderer,
ytd-search #chips,
ytd-search iron-selector#chips,
ytd-search yt-chip-cloud-chip-renderer {
  display: none !important;
}

/* Algorithmic suggestions */
ytd-search ytd-shelf-renderer:not(:has(ytd-video-renderer)),
ytd-search ytd-horizontal-card-list-renderer {
  display: none !important;
}

/* Promotional banners */
ytd-search ytd-banner-promo-renderer,
ytd-search ytd-statement-banner-renderer {
  display: none !important;
}

/* ============================================
   CREATOR PROFILE PAGE (Default Hidden Elements)
   ============================================ */

/* Shorts Tab */
ytd-browse[page-subtype='channels'] tp-yt-paper-tab[title='Shorts'],
ytd-browse[page-subtype='channels'] ytd-tab-renderer[tab-title='Shorts'],
tp-yt-paper-tab[title='Shorts'],
ytd-tab-renderer[tab-title='Shorts'] {
  display: none !important;
}

/* Community/Posts Tab */
ytd-browse[page-subtype='channels'] tp-yt-paper-tab[title='Community'],
ytd-browse[page-subtype='channels'] tp-yt-paper-tab[title='Posts'],
ytd-browse[page-subtype='channels'] ytd-tab-renderer[tab-title='Community'],
ytd-browse[page-subtype='channels'] ytd-tab-renderer[tab-title='Posts'],
tp-yt-paper-tab[title='Community'],
tp-yt-paper-tab[title='Posts'],
ytd-tab-renderer[tab-title='Community'],
ytd-tab-renderer[tab-title='Posts'] {
  display: none !important;
}

/* Community posts and Shorts in channel tabs (always hidden by default) */
/* Scope to channel tabs specifically to avoid hiding Posts on /post/* detail pages */
ytd-browse[page-subtype='channels']
  ytd-tab-renderer[page-type='ProfileChannelTab']
  ytd-post-renderer,
ytd-browse[page-subtype='channels']
  ytd-tab-renderer[page-type='ProfileChannelTab']
  ytd-backstage-post-renderer,
ytd-browse[page-subtype='channels'] ytd-rich-item-renderer:has(ytd-post-renderer),
ytd-browse[page-subtype='channels'] ytd-rich-item-renderer:has(ytd-backstage-post-renderer),
ytd-browse[page-subtype='channels'] ytd-reel-shelf-renderer,
ytd-browse[page-subtype='channels'] ytd-rich-shelf-renderer[is-shorts] {
  display: none !important;
}

/* Promotional banners */
ytd-browse[page-subtype='channels'] ytd-banner-promo-renderer,
ytd-browse[page-subtype='channels'] ytd-statement-banner-renderer {
  display: none !important;
}

/* ============================================
   WATCH PAGE (Default Hidden Elements)
   ============================================ */

/* IMPORTANT: Only non-configurable, always-hidden elements belong here.
   All toggleable Watch Page elements (Like/Dislike, Comments, Related, etc.)
   are handled by the Watch Page module's dynamic CSS injection. */

/* Like/Dislike buttons - Always hidden by default - Target parent containers for optimal specificity */
ytd-watch-flexy segmented-like-dislike-button-view-model,
ytd-watch-flexy ytd-segmented-like-dislike-button-renderer {
  display: none !important;
}

/* Share button - Always hidden by default - SVG path-based language-agnostic selector */
ytd-watch-flexy yt-button-view-model:has(svg path[d*='M10 3.158V7.51c-5.428']),
ytd-watch-flexy button-view-model:has(svg path[d*='M10 3.158V7.51c-5.428']),
ytd-watch-flexy ytd-button-renderer:has(svg path[d*='M10 3.158V7.51c-5.428']),
ytd-watch-flexy ytd-menu-service-item-renderer:has(svg path[d*='M10 3.158V7.51c-5.428']) {
  display: none !important;
}

/* More Actions (Save, Download, Clip, Thanks, Report, Ask AI, Overflow Menu) - Always hidden by default - SVG path-based selectors */
/* Save button */
ytd-watch-flexy ytd-download-and-save-button-renderer,
ytd-watch-flexy yt-button-view-model:has(svg path[d*='M19 2H5a2 2 0 00-2 2v16.887']),
ytd-watch-flexy ytd-button-renderer:has(svg path[d*='M19 2H5a2 2 0 00-2 2v16.887']),
ytd-watch-flexy ytd-menu-service-item-renderer:has(svg path[d*='M19 2H5a2 2 0 00-2 2v16.887']),
/* Download button */
ytd-watch-flexy ytd-download-button-renderer,
ytd-watch-flexy yt-button-view-model:has(svg path[d*='M17 18v1H6v-1h11Z']),
ytd-watch-flexy ytd-menu-service-item-renderer:has(svg path[d*='M17 18v1H6v-1h11Z']),
/* Clip button */
ytd-watch-flexy yt-button-view-model:has(svg path[d*='M6 2.002a4 4 0 102.03 7.445']),
ytd-watch-flexy ytd-button-renderer:has(svg path[d*='M6 2.002a4 4 0 102.03 7.445']),
ytd-watch-flexy ytd-menu-service-item-renderer:has(svg path[d*='M6 2.002a4 4 0 102.03 7.445']),
/* Thanks button */
ytd-watch-flexy yt-button-view-model:has(svg path[d*='M12 21.35l-1.45']),
ytd-watch-flexy ytd-button-renderer:has(svg path[d*='M12 21.35l-1.45']),
ytd-watch-flexy ytd-menu-service-item-renderer:has(svg path[d*='M12 21.35l-1.45']),
/* Report button */
ytd-watch-flexy yt-button-view-model:has(svg path[d*='M14.4 6L14 4H5v17h2v-7h5.6']),
ytd-watch-flexy ytd-button-renderer:has(svg path[d*='M14.4 6L14 4H5v17h2v-7h5.6']),
ytd-watch-flexy ytd-menu-service-item-renderer:has(svg path[d*='M14.4 6L14 4H5v17h2v-7h5.6']),
/* Ask button - Updated with correct SVG path */
ytd-watch-flexy yt-button-view-model:has(svg path[d*='M480-80']),
ytd-watch-flexy ytd-button-renderer:has(svg path[d*='M480-80']),
ytd-watch-flexy ytd-menu-service-item-renderer:has(svg path[d*='M480-80']),
ytd-watch-flexy button[aria-label='Ask'],
ytd-watch-flexy yt-button-view-model:has(button[aria-label='Ask']),
/* Overflow menu (three dots) */
ytd-watch-metadata-actions ytd-menu-renderer,
ytd-watch-flexy yt-button-shape:has(svg path[d*='M6 10a2 2 0 100 4 2 2 0 000-4Zm6 0a2 2 0 100 4']),
ytd-watch-flexy ytd-menu-renderer button:has(svg path[d*='M6 10a2 2 0 100 4 2 2 0 000-4Zm6 0a2 2 0 100 4']) {
  display: none !important;
}

/* Subscription Actions (Subscribe, Join, Notifications, See Perks) - Language-agnostic selectors */
/* Subscribe button - Component-based selector */
ytd-watch-flexy ytd-subscribe-button-renderer,
ytd-watch-metadata-actions ytd-subscribe-button-renderer,
/* Notifications bell - Component + SVG path-based selector for bell icon */
ytd-watch-flexy ytd-subscription-notification-toggle-button-renderer,
ytd-watch-flexy ytd-subscription-notification-toggle-button-renderer-next,
ytd-watch-flexy #notification-preference-button,
ytd-watch-flexy button:has(svg path[d*='M19.395 1.196a1 1 0 00-.199 1.4A9 9 0 0121 8']),
ytd-watch-metadata-actions ytd-notification-preferences-button-renderer,
/* Join button - Href-based selector (membership links are language-independent) */
ytd-watch-flexy ytd-button-renderer:has(a[href*='/membership']),
ytd-watch-metadata-actions ytd-membership-button-renderer,
/* See Perks button - Href-based selector (sponsor links are language-independent) */
ytd-watch-flexy #sponsor-button,
ytd-watch-flexy ytd-button-renderer:has(a[href*='/sponsor']),
ytd-watch-flexy ytd-video-owner-renderer ytd-button-renderer:has(a[href*='/sponsor']) {
  display: none !important;
}

/* Comments Section */
ytd-watch-flexy #comments,
ytd-comments#comments {
  display: none !important;
}

/* Related Videos Sidebar */
ytd-watch-flexy #related,
ytd-watch-next-secondary-results-renderer {
  display: none !important;
}

/* Playlists */
ytd-watch-flexy ytd-playlist-panel-renderer {
  display: none !important;
}

/* Info Cards and Recommended Video Cards */
ytd-watch-flexy ytd-info-cards-button-renderer,
.ytp-ce-element,
.ytp-cards-button,
.ytp-ce-covering-overlay,
.ytp-ce-element-show,
.ytp-cards-teaser {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
}

/* End Screen Elements (always hidden, non-configurable) */
.ytp-ce-element,
.ytp-ce-video,
.ytp-ce-playlist,
.ytp-ce-channel,
.ytp-ce-covering-overlay,
.ytp-ce-element-show,
.ytp-endscreen-content {
  display: none !important;
  pointer-events: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
}

/* Live Chat (always hidden, non-configurable) */
ytd-watch-flexy ytd-live-chat-frame,
ytd-live-chat-frame#chat {
  display: none !important;
  pointer-events: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
}

/* Shorts in Related Videos (always hidden) */
ytd-watch-next-secondary-results-renderer ytd-reel-shelf-renderer {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
}

/* Hide #secondary container when both playlists and related videos should be hidden */
/* Note: This will be overridden by settings-based CSS if user enables either feature */
ytd-watch-flexy #secondary.style-scope.ytd-watch-flexy {
  display: none !important;
}

ytd-watch-flexy[flexy][theater] #primary.ytd-watch-flexy,
ytd-watch-flexy[flexy][fullscreen] #primary.ytd-watch-flexy {
  max-width: 100% !important;
}

/* ============================================
   LAYOUT ADJUSTMENTS
   ============================================ */

/* Adjust page content to fill space when sidebar is hidden (all pages) */
ytd-page-manager {
  margin-left: 0 !important;
}

/* Center search bar in header (all pages) */
#masthead-container.ytd-masthead {
  display: flex !important;
  align-items: center !important;
}

/* Force start and end sections to take equal space for true centering */
#start.ytd-masthead,
#end.ytd-masthead {
  flex: 1 1 0 !important;
  min-width: 0 !important;
}

/* Center section maintains proper search box width */
#center.ytd-masthead {
  flex: 0 0 auto !important;
  max-width: 732px !important;
  width: 100% !important;
}

/* Align content within start and end sections */
#start.ytd-masthead {
  display: flex !important;
  justify-content: flex-start !important;
  align-items: center !important;
}

#end.ytd-masthead {
  display: flex !important;
  justify-content: flex-end !important;
  align-items: center !important;
}

/* Search form sizing */
#search-form {
  margin: 0 auto !important;
  width: 100% !important;
  max-width: 640px !important;
}

/* Reset asymmetric margins on search box components */
.ytSearchboxComponentHost {
  margin: 0 !important;
}

.ytSearchboxComponentInputBox {
  margin-left: 0 !important;
}
